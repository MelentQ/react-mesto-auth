{"version":3,"sources":["components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ImagePopup.js","utils/api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/AuthForm.js","components/Login.js","components/Register.js","images/icons/error-cross.svg","images/icons/accept.svg","components/InfoTooltip.js","components/ProtectedRoute.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","linkText","loggedIn","userEmail","onSignOut","path","useLocation","pathname","link","className","to","title","onClick","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","cardDeleteButtonClassName","owner","_id","cardLikeButtonClassName","likes","some","i","src","alt","name","type","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","handleCardDelete","handleCardLike","avatar","about","map","item","Footer","props","date","Date","getFullYear","PopupWithForm","submitBtnText","children","isOpen","onClose","onSubmit","id","ImagePopup","api","address","token","handleResponse","this","_address","_token","_handleResponse","fetch","method","headers","authorization","then","body","JSON","stringify","cardId","isLiked","res","ok","json","Promise","reject","status","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","e","preventDefault","onChange","target","value","placeholder","required","minLength","maxLength","EditAvatarPopup","onUpdateAvatar","avatarLinkRef","useRef","current","ref","AddPlacePopup","cardName","setCardName","cardLink","setCardLink","AuthForm","btnText","email","setEmail","pass","setPass","Login","onLogin","Register","onRegister","InfoTooltip","isError","errorIcon","acceptIcon","ProtectedRoute","Component","component","BASE_URL","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isInfoPopupOpen","setIsInfoPopupOpen","isInfoTooltipError","setIsInfoTooltipError","selectedCard","setSelectedCard","setCurrentUser","setCards","setLoggedIn","setUserEmail","history","useHistory","closeAllPopups","all","getUserData","getCards","userData","catch","err","console","log","localStorage","getItem","data","push","Provider","removeItem","exact","deleteCard","state","filter","c","changeLikeCardStatus","newCard","password","login","setItem","register","finally","user","setProfileInfo","setUserAvatar","addCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","basename","document","getElementById"],"mappings":"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","file":"static/js/main.854a7821.chunk.js","sourcesContent":["import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\n\nfunction Header({loggedIn, userEmail, onSignOut}) {\n  const {pathname: path} = useLocation();\n\n  let linkText;\n  const link = (path === '/sign-up') ? 'sign-in' : 'sign-up';\n\n  if (path === '/sign-up') linkText = 'Войти';\n  if (path === '/') linkText = 'Выйти';\n  if (path === '/sign-in') linkText = 'Регистрация';\n\n  return(\n    <header className=\"header section section_place_header\">\n      <Link to=\"/\" className=\"header__logo\" title=\"На главную\"/>\n      <div className=\"header__links\">\n        {loggedIn && (<span className=\"header__label\">{userEmail}</span>)}\n        <Link to={link} onClick={onSignOut} className=\"header__link\" >{linkText}</Link>\n      </div>\n    </header>\n  )\n}\n\nexport  default  Header;\n","import React from 'react';\nexport  const CurrentUserContext = React.createContext();\n","import React from 'react';\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nfunction Card({card, onCardClick, onCardLike, onCardDelete}) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const isOwn = card.owner._id === currentUser._id;\n  const cardDeleteButtonClassName = isOwn ? '' : ' photo__delete-button_hiden';\n\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\n  const cardLikeButtonClassName = isLiked ? ' photo__like-button_active' : '';\n\n  function handleClick() {\n    onCardClick(card);\n  }\n\n  function handleLikeClick() {\n    onCardLike(card);\n  }\n\n  function handleDeleteClick() {\n    onCardDelete(card);\n  }\n\n  return(\n    <li className=\"photo\">\n      <img src={card.link} className=\"photo__image\" alt={card.name} onClick={handleClick}/>\n      <button onClick={handleDeleteClick} type=\"button\" className={`photo__delete-button${cardDeleteButtonClassName}`}/>\n      <div className=\"photo__description\">\n        <h2 className=\"photo__name\">{card.name}</h2>\n        <div className=\"photo__like-container\">\n          <button onClick={handleLikeClick} type=\"button\" className={`photo__like-button${cardLikeButtonClassName}`}/>\n          <span className=\"photo__like-count\">{card.likes.length}</span>\n        </div>\n      </div>\n    </li>\n  )\n}\n\nexport  default  Card;\n","import React from 'react';\nimport Card from \"./Card\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nfunction Main({onEditProfile, onAddPlace, onEditAvatar, onCardClick, cards, handleCardDelete, handleCardLike}) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return(\n    <main className=\"content\">\n\n      <section className=\"profile section\">\n        <button className=\"profile__avatar-btn\" onClick={onEditAvatar} type=\"button\">\n          <img src={currentUser.avatar} alt=\"Аватар\" className=\"profile__avatar\"/>\n          <span className=\"profile__avatar-btn-icon\"/>\n        </button>\n\n        <div className=\"profile__info\">\n          <div className=\"profile__edit-container\">\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\n\n            <button type=\"button\" className=\"profile__button profile__button_type_edit\" onClick={onEditProfile}/>\n          </div>\n\n          <p className=\"profile__activity\">{currentUser.about}</p>\n        </div>\n\n        <button type=\"button\" className=\"profile__button profile__button_type_add\" onClick={onAddPlace}/>\n\n      </section>\n\n      <section className=\"photos section\">\n        <ul className=\"photos__list\">\n          {\n            cards.map(item => {\n              return (\n                <Card\n                  key={item._id}\n                  card={item}\n                  onCardClick={onCardClick}\n                  onCardLike={handleCardLike}\n                  onCardDelete={handleCardDelete}\n                />\n              )\n            })\n          }\n        </ul>\n      </section>\n\n    </main>\n  )\n}\n\nexport  default  Main;\n","import React from 'react';\n\nfunction Footer(props) {\n  const date = new Date();\n  return(\n    <footer className=\"footer section\">\n      <p className=\"footer__copyright\">&copy; {date.getFullYear()} Mesto Russia</p>\n    </footer>\n  )\n}\n\nexport  default  Footer;\n","import React from 'react';\n\nfunction PopupWithForm({title, name, submitBtnText, children, isOpen, onClose, onSubmit}) {\n  return(\n    <div className={`popup${isOpen ? ' popup_opened' : ''}`} id={`${name}Popup`}>\n      <div className=\"popup__container\">\n        <button type=\"button\" className=\"popup__close-button\" onClick={onClose}/>\n        <h2 className=\"popup__title\">{title}</h2>\n\n        <form onSubmit={onSubmit} className=\"input\" name={`${name}Form`}>\n          {children}\n\n          <button type=\"submit\" className=\"input__submit-button\">\n            {submitBtnText}\n          </button>\n        </form>\n      </div>\n    </div>\n  )\n}\n\nexport  default  PopupWithForm;\n","import React from 'react';\n\nfunction ImagePopup({card, onClose}) {\n  return(\n    <div className={`popup${card.name ? ' popup_opened' : ''}`} id=\"cardPopup\">\n      <figure className=\"popup__image-container\">\n        <button type=\"button\" className=\"popup__close-button\" onClick={onClose}/>\n        <img src={card.link} alt={card.name} className=\"popup__image\"/>\n        <figcaption className=\"popup__image-name\">{card.name}</figcaption>\n      </figure>\n    </div>\n  )\n}\n\nexport  default  ImagePopup;\n","class Api {\n  /**\n   * Класс для работы с API Mesto\n   * @param {String} address базовый адрес, например https://mesto.nomoreparties.co/v1/cohort-24\n   * @param {String} token токен, например 68a2e8bf-41f6-4309-86d1-09aae1dd8e56\n   * @param {Function} handleResponse колбэк функция, которая обрабатывает ответ промиса\n   */\n  constructor(address, token, handleResponse) {\n    this._address = address;\n    this._token = token;\n    this._handleResponse = handleResponse;\n  }\n\n  /**\n   *\n   * @returns Возвращает начальные карточки с сервера\n   */\n  getCards() {\n    return fetch(`${this._address}/cards`, {\n      method: 'GET',\n      headers: {\n        authorization: this._token\n      }\n    })\n    .then(this._handleResponse)\n  }\n\n  /**\n   *\n   * @returns Возвращает данные пользователя с сервера\n   */\n  getUserData() {\n    return fetch(`${this._address}/users/me`, {\n      method: 'GET',\n      headers: {\n        authorization: this._token\n      }\n    })\n    .then(this._handleResponse)\n  }\n\n  /**\n   * Назначает новые данные пользователя\n   * @param {*} name - имя пользователя\n   * @param {*} about - о пользователе\n   * @returns Возвращает готовый объект, содержащий все обновленные данные пользователя\n   */\n  setProfileInfo(name, about) {\n    return fetch(`${this._address}/users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: name,\n        about: about\n      })\n    })\n    .then(this._handleResponse)\n  }\n\n  /**\n   * Назначает новый аватар пользователя\n   * @param {*} link - ссылка на изображение\n   * @returns Возвращает готовый объект, содержащий все обновленные данные пользователя\n   */\n  setUserAvatar(link) {\n    return fetch(`${this._address}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        avatar: link\n      })\n    })\n    .then(this._handleResponse)\n  }\n\n  /**\n   * Добавляет на сервер новую карточку\n   * @param {*} name - имя карточки\n   * @param {*} link - ссылка на карточку\n   * @returns Возвращает готовый объект с данными карточки\n   */\n  addCard(name, link) {\n    return fetch(`${this._address}/cards`, {\n      method: 'POST',\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        name: name,\n        link: link\n      })\n    })\n    .then(this._handleResponse)\n  }\n\n  changeLikeCardStatus(cardId, isLiked) {\n    const method = isLiked ? 'PUT' : 'DELETE';\n\n    return fetch(`${this._address}/cards/likes/${cardId}`, {\n      method: method,\n      headers: {\n        authorization: this._token\n      }\n    })\n      .then(this._handleResponse)\n  }\n\n  /**\n   * Удаляет карточку\n   * @param {*} cardId - идентификатор карточки\n   */\n  deleteCard(cardId) {\n    return fetch(`${this._address}/cards/${cardId}`, {\n      method: 'DELETE',\n      headers: {\n        authorization: this._token\n      }\n    })\n    .then(this._handleResponse)\n  }\n}\n\nconst apiAddress = 'https://mesto.nomoreparties.co/v1/cohort-24';\nconst apiToken = '68a2e8bf-41f6-4309-86d1-09aae1dd8e56';\nconst handleResponse = (res) => res.ok ? res.json() : Promise.reject(res.status);\nconst api = new Api(apiAddress, apiToken, handleResponse);\n\nexport default api;\n","import React from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nfunction EditProfilePopup({isOpen, onClose, onUpdateUser}) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n\n  function handleNameChange(e) {\n    setName(e.target.value);\n  }\n\n  function handleDescriptionChange(e) {\n    setDescription(e.target.value);\n  }\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser, isOpen]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onUpdateUser({\n      name: name,\n      about: description,\n    });\n  }\n\n  return (\n    <PopupWithForm\n      name={'edit'}\n      submitBtnText={'Сохранить'}\n      title={'Редактировать профиль'}\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <div className=\"input__field\">\n        <input onChange={handleNameChange} value={name || ''} type=\"text\" name=\"name\" id=\"name-input\" placeholder=\"Ваше имя\" className=\"input__text input__text_type_name\" required minLength=\"2\" maxLength=\"40\"/>\n        <span className=\"input__text-error\" id=\"name-input-error\"/>\n      </div>\n\n      <div className=\"input__field\">\n        <input onChange={handleDescriptionChange} value={description || ''} type=\"text\" name=\"activity\" id=\"activity-input\" placeholder=\"Чем вы занимаетесь\" className=\"input__text input__text_type_activity\" required minLength=\"2\" maxLength=\"200\"/>\n        <span className=\"input__text-error\" id=\"activity-input-error\"/>\n      </div>\n\n    </PopupWithForm>\n  )\n}\n\nexport  default EditProfilePopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction EditAvatarPopup({onClose, isOpen, onUpdateAvatar}) {\n\n  const avatarLinkRef = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onUpdateAvatar({\n      avatar: avatarLinkRef.current.value\n    });\n\n    // Сбрасываем поля\n    avatarLinkRef.current.value = '';\n  }\n\n  return (\n    <PopupWithForm\n      name={'avatar'}\n      submitBtnText={'Сохранить'}\n      title={'Обновить аватар'}\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <div className=\"input__field\">\n        <input ref={avatarLinkRef} type=\"url\" name=\"link\" id=\"avatar-link-input\" placeholder=\"Ссылка на картинку\" className=\"input__text input__text_type_link\" required/>\n        <span className=\"input__text-error\" id=\"avatar-link-input-error\"/>\n      </div>\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction AddPlacePopup({onClose, isOpen, onAddPlace}) {\n\n  const [cardName, setCardName] = React.useState('');\n  const [cardLink, setCardLink] = React.useState('');\n\n  function handleCardNameChange(e) {\n    setCardName(e.target.value);\n  }\n\n  function  handleCardLinkChange(e) {\n    setCardLink(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onAddPlace({\n      name: cardName,\n      link: cardLink\n    })\n\n    // Сбрасываем поля\n    setCardName('');\n    setCardLink('');\n  }\n\n  return (\n    <PopupWithForm\n      name={'add'}\n      submitBtnText={'Создать'}\n      title={'Новое место'}\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <div className=\"input__field\">\n        <input onChange={handleCardNameChange} value={cardName} type=\"text\" name=\"description\" id=\"description-input\" placeholder=\"Название\" className=\"input__text input__text_type_name\" required minLength=\"2\" maxLength=\"30\"/>\n        <span className=\"input__text-error\" id=\"description-input-error\"/>\n      </div>\n\n      <div className=\"input__field\">\n        <input onChange={handleCardLinkChange} value={cardLink} type=\"url\" name=\"link\" id=\"link-input\" placeholder=\"Ссылка на картинку\" className=\"input__text input__text_type_link\" required/>\n        <span className=\"input__text-error\" id=\"link-input-error\"/>\n      </div>\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup;\n","import React from 'react';\n\nfunction AuthForm({onSubmit, title, btnText, children}) {\n  const [email, setEmail] = React.useState('');\n  const [pass, setPass] = React.useState('');\n\n  function handleChangeEmail(e) {\n    setEmail(e.target.value);\n  }\n\n  function handleChangePass(e) {\n    setPass(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onSubmit(email, pass);\n  }\n\n  return (\n    <section className=\"section section_place_auth\">\n      <form onSubmit={handleSubmit} className=\"form\" name=\"registerForm\">\n        <h2 className=\"form__title\">{title}</h2>\n\n        <fieldset className=\"form__inputs\">\n          <input onChange={handleChangeEmail} value={email || ''} className=\"form__input\" type=\"email\" placeholder=\"Email\"/>\n          <input onChange={handleChangePass} value={pass || ''} className=\"form__input\" type=\"password\" placeholder=\"Пароль\"/>\n        </fieldset>\n\n        <input className=\"form__btn\" type=\"submit\" value={btnText}/>\n      </form>\n      {children}\n    </section>\n  )\n}\n\nexport default AuthForm;\n","import React from 'react';\nimport AuthForm from './AuthForm';\n\nfunction Login({onLogin}) {\n\n  return (\n    <AuthForm\n      onSubmit={onLogin}\n      title=\"Вход\"\n      btnText=\"Войти\"\n    />\n  )\n}\n\nexport default Login;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport AuthForm from \"./AuthForm\";\n\nfunction Register({onRegister}) {\n  return (\n    <AuthForm\n      onSubmit={onRegister}\n      title=\"Регистрация\"\n      btnText=\"Зарегистрироваться\"\n    >\n      <Link to='/sign-in' className=\"form__link\">Уже зарегистрированы? Войти</Link>\n    </AuthForm>\n  )\n}\n\nexport default Register;\n","export default __webpack_public_path__ + \"static/media/error-cross.df8eddf6.svg\";","export default __webpack_public_path__ + \"static/media/accept.1b6082f8.svg\";","import React from 'react';\nimport errorIcon from '../images/icons/error-cross.svg';\nimport acceptIcon from '../images/icons/accept.svg';\n\nfunction InfoTooltip({isOpen, isError, onClose}) {\n  return (\n    <div className={`popup${isOpen ? ' popup_opened' : ''}`} id=\"infoPopup\">\n      <div className=\"popup__container popup__container_place_info-popup\">\n        <button type=\"button\" className=\"popup__close-button\" onClick={onClose}/>\n\n        <img className=\"popup__icon\" src={isError ? errorIcon : acceptIcon} alt=\"Иконка\"/>\n\n        <h2 className=\"popup__title popup__title_type_info-popup\">\n          {isError ?\n          'Что-то пошло не так! Попробуйте ещё раз.'\n          :\n          'Вы успешно зарегистрировались!'}\n        </h2>\n      </div>\n    </div>\n  )\n}\n\nexport default InfoTooltip;\n","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nfunction ProtectedRoute({ component: Component, ...props  }) {\n  return (\n    <Route>\n      {\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\n      }\n    </Route>\n  )}\n\nexport default ProtectedRoute;\n","export const BASE_URL = 'https://auth.nomoreparties.co';\n\nconst handleResponse = (res) => res.ok ? res.json() : Promise.reject(res.status);\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      \"password\": password,\n      \"email\": email\n    })\n  })\n    .then(handleResponse)\n};\n\nexport const login = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      \"password\": password,\n      \"email\": email\n    })\n  })\n    .then(handleResponse)\n};\n\nexport const checkToken = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`,\n    }\n  })\n    .then(handleResponse)\n}\n","import React from 'react';\nimport {Route, Switch, Redirect, useHistory} from 'react-router-dom';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\nimport api from \"../utils/api\";\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport InfoTooltip from './InfoTooltip';\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport {register, login, checkToken} from \"../utils/auth\"\n\nfunction App() {\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isInfoPopupOpen, setIsInfoPopupOpen] = React.useState(false);\n  const [isInfoTooltipError, setIsInfoTooltipError] = React.useState(false);\n\n  const [selectedCard, setSelectedCard] = React.useState({});\n\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [userEmail, setUserEmail] = React.useState('');\n\n  let history = useHistory();\n\n  React.useEffect(() => {\n    Promise.all([api.getUserData(), api.getCards()])\n      .then(([userData, cards]) => {\n        setCurrentUser(userData);\n\n        setCards(cards);\n      })\n      .catch(err => console.log(`Ошибка при загрузке данных с сервера: ${err.status}`))\n  }, [])\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then(newCard => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch(err => console.log(`Ошибка при лайке карточки: ${err.status}`))\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n      .then(() => {\n        setCards((state) => state.filter(c => c._id !== card._id))\n      })\n      .catch(err => console.log(`Ошибка при удалении карточки: ${err.status}`))\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsInfoPopupOpen(false);\n    setSelectedCard({});\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card)\n  }\n\n  function handleUpdateUser(user) {\n    api.setProfileInfo(user.name, user.about)\n      .then(userData => {\n        setCurrentUser(userData);\n        closeAllPopups();\n      })\n      .catch(err => console.log(`Ошибка при обновлении данных пользователя: ${err.status}`))\n  }\n\n  function handleUpdateAvatar(user) {\n    api.setUserAvatar(user.avatar)\n      .then(userData => {\n        setCurrentUser(userData);\n        closeAllPopups();\n      })\n      .catch(err => console.log(`Ошибка при обновлении аватара: ${err.status}`))\n  }\n\n  function handleAddPlaceSubmit(card) {\n    api.addCard(card.name, card.link)\n      .then(newCard => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch(err => console.log(`Ошибка при добавлении карточки: ${err.status}`))\n  }\n\n  // Обработчик для регистрации\n  function handleRegister(email, password) {\n    register(email, password)\n      .then(res => {\n        // Информируем об успешном создании в infoPopup\n        setIsInfoTooltipError(false);\n        // Перенаправляем на страницу входа\n        history.push(\"/sign-in\");\n      })\n      .catch(err => {\n        // Здесь задаем ошибку в infoPopup\n        setIsInfoTooltipError(true);\n        console.log(err);\n      })\n      .finally(() => {\n        // Здесь открываем infoPopup\n        setIsInfoPopupOpen(true);\n      })\n  }\n\n  // Обработчик для авторизации\n  function handleLogin(email, password) {\n    login(email, password)\n      .then(res => {\n        // Если ответ успешный, то забираем токен\n        localStorage.setItem('jwt', res.token);\n        // Устанавливаем значение loggedIn на True\n        setLoggedIn(true);\n        // Сохраняем Email пользователя\n        setUserEmail(email);\n        // Перенаправляем в Main\n        history.push('/');\n      })\n      .catch(err => {\n        // Открываем infoPopup и уведомляем, что что-то пошло не так\n        setIsInfoTooltipError(true);\n        setIsInfoPopupOpen(true);\n        console.log(err);\n      })\n  }\n\n  // Обработчик для выхода из аккаунта\n  function handleLogout() {\n    // Удаляем токен\n    localStorage.removeItem('jwt');\n    // Устанавливаем значение loggedIn на False\n    setLoggedIn(false);\n    // Сбрасываем Email пользователя\n    setUserEmail('');\n    // Перенаправляем на страницу входа\n    history.push(\"/sign-in\");\n  }\n\n  // Поиск токена в локальном хранилище\n  React.useEffect(() => {\n    const jwt = localStorage.getItem('jwt');\n\n    // Если токен есть, то проверяем его на сервере\n    if (jwt) {\n      checkToken(localStorage.getItem('jwt'))\n        .then(res => {\n          // Устанавливаем значение loggedIn на True\n          setLoggedIn(true);\n          // Сохраняем Email пользователя\n          setUserEmail(res.data.email);\n          // Перенаправляем в Main\n          history.push('/');\n        })\n        .catch((err) => {\n          // В случае ошибки перенаправляем на страницу входа\n          // На всякий случай сбрасываем данные пользователя\n          history.push('/sign-in');\n          setLoggedIn(false);\n          setUserEmail('');\n\n          console.log(err)\n        })\n    }\n  }, [])\n\n  return (\n    <>\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header\n          loggedIn={loggedIn}\n          userEmail={userEmail}\n          onSignOut={handleLogout}\n        />\n\n        <Switch>\n          <ProtectedRoute\n            component={Main}\n            exact path=\"/\"\n            loggedIn={loggedIn}\n\n            onEditProfile={handleEditProfileClick}\n            onEditAvatar={handleEditAvatarClick}\n            onAddPlace={handleAddPlaceClick}\n            onCardClick={handleCardClick}\n            cards={cards}\n            handleCardDelete={handleCardDelete}\n            handleCardLike={handleCardLike}\n          />\n\n          <Route path=\"/sign-in\">\n            <Login\n              onLogin={handleLogin}\n            />\n          </Route>\n\n          <Route path=\"/sign-up\">\n            <Register\n              onRegister={handleRegister}\n            />\n          </Route>\n\n          <Route exact path=\"*\">\n            <Redirect to=\"/sign-in\" />\n          </Route>\n        </Switch>\n\n        <Footer />\n\n        <PopupWithForm\n          name={'delete'}\n          submitBtnText={'Да'}\n          title={'Вы уверены?'}\n        />\n\n        <EditProfilePopup\n          onUpdateUser={handleUpdateUser}\n          onClose={closeAllPopups}\n          isOpen={isEditProfilePopupOpen}\n        />\n\n        <EditAvatarPopup\n          onUpdateAvatar={handleUpdateAvatar}\n          onClose={closeAllPopups}\n          isOpen={isEditAvatarPopupOpen}\n        />\n\n        <AddPlacePopup\n          onAddPlace={handleAddPlaceSubmit}\n          onClose={closeAllPopups}\n          isOpen={isAddPlacePopupOpen}\n        />\n\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups}\n        />\n\n        <InfoTooltip\n          isOpen={isInfoPopupOpen}\n          isError={isInfoTooltipError}\n          onClose={closeAllPopups}\n        />\n\n      </CurrentUserContext.Provider>\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport {BrowserRouter} from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter basename=\"/react-mesto-auth\">\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}